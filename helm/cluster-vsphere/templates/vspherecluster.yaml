apiVersion: {{ include "infrastructureApiVersion" . }}
kind: VSphereCluster
metadata:
  name: {{ include "resource.default.name" $ }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "labels.common" . | nindent 4 }}
    {{- include "preventDeletionLabel" $ | nindent 4 }}
  {{- if .Values.global.providerSpecific.additionalInfrastructureAnnotations }}
  {{- include "additional-annotations" . | indent 2}}
  {{- end }}
spec:
  controlPlaneEndpoint:
    host: '{{ ((.Values.global.connectivity.network).controlPlaneEndpoint).host }}'
    port: {{ ((.Values.global.connectivity.network).controlPlaneEndpoint).port | default 6443 }}

  identityRef:
    kind: Secret
    name: {{ include "credentialSecretName" $ }}
  server: {{ .Values.global.providerSpecific.vcenter.server }}
  thumbprint: {{ .Values.global.providerSpecific.vcenter.thumbprint }}
